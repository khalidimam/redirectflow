<!DOCTYPE html>

<head>
  <title>initializing...</title>
  <style type="text/css">
  </style>
  <script type="text/javascript">
    function removeIFrame() {
      var frame = document.getElementById("iframe");
      frame.parentNode.removeChild(frame);
    }
  </script>
</head>

<body>
  <iframe id="iframe" width="0" height="0"></iframe>
  <script>
     document.addEventListener("DOMContentLoaded", function(){
        var mainParameter = window.location.search;
        const urlParams = new URLSearchParams(window.location.search);
        var phoneNumber = urlParams.get('phoneNumber') || '';
        // remove quotes
        phoneNumber = phoneNumber.replace(/^"(.*)"$/, '$1');
        // remove the country code
        phoneNumber = phoneNumber.replace(/\D/g, '').slice(-10);
        var completeLocalAddress = "http://localhost:36729/?CID=BCM1234&ANI="+phoneNumber+"&DNIS=1-800-411-7343&BP=&SerialNo=&ExternalReferenceID=&Custom_1=50000000928&Custom_2=SDGE_ERMove&Custom_3=Move&Custom_4="
        var iframeSrcValue = document.getElementById("iframe").src;
        console.log("iframe source"+completeLocalAddress);
        document.getElementById('iframe').setAttribute("src", completeLocalAddress); //Change the src's value!
     });
  </script>
  <script>
  setTimeout(function () { removeIFrame();
  window.close()}, 500);
</script>
</body>